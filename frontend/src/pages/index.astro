---
import Layout from '../layouts/Layout.astro';
import { API_URL } from '../constants/index';
import MainImage from '../components/app/MainImage.vue';
import ProjectList from '../components/app/ProjectList.astro';
import HomeDescription from '../components/app/HomeDescription.astro';
import type { ApiResponse } from './api/api-response';
import type { Project } from './api/generated';

const response = await fetch(`${API_URL}/project/list`);
const data: ApiResponse<Project[]> = await response.json();

const mainImages = data.data.map(p => p.mainImage);
---

<Layout title="ATRA - Asistència tècnica en rehabilitació i arquitectura">
	<MainImage
		images={mainImages}
		client:visible
	/>
	<HomeDescription />
	<ProjectList projects={data.data} />
</Layout>
./api/generated/index
