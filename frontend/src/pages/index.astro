---
import Layout from '../layouts/Layout.astro';
import { API_URL } from '../constants/index';
import MainImage from '../components/MainImage.vue';
import type { ApiResponse } from '../api/api_response';
import type { Project } from '../api/index';
import HomeProjectList from '../components/HomeProjectList.astro';
import HomeDescription from '../components/HomeDescription.astro';

const response = await fetch(`${API_URL}/project/list`);
const data: ApiResponse<Project[]> = await response.json();

const mainImages = data.data.map((p) => p.mainImage);
---

<Layout title="ATRA - Asistència tècnica en rehabilitació i arquitectura">
    <main>
        <MainImage
            images={mainImages}
            client:visible
        />
        <HomeDescription />
        <HomeProjectList projects={data.data} />
    </main>
</Layout>

<style>
    main {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
        gap: 5rem;
    }
</style>
