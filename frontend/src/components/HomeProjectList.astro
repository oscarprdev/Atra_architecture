---
import { IMAGE_URL } from '../constants/index';
import type { Project } from '../api/index';
import Link from './Link.astro';

const { projects }: Record<string, Project[]> = Astro.props;
---

<section class="home-projects">
    <ul>
        {
            projects.map((pr) => (
                <li
                    id="list-item"
                    class="show"
                >
                    <picture>
                        <img
                            src={`${IMAGE_URL}/${pr.mainImage.Key}`}
                            alt={pr.title}
                        />
                    </picture>
                    <Link
                        href={`/project/${pr.id}`}
                        text={pr.title}
                    />
                </li>
            ))
        }
    </ul>
</section>

<style>
    .home-projects {
        display: flex;
        align-items: center;
        flex-direction: column;

        gap: 10rem;

        height: 100%;
        width: 100%;
        max-width: var(--max-width);
    }

    ul {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 3rem;
        justify-content: center;
        width: 80vw;
        max-width: var(--max-width);
    }

    li {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    li:nth-child(even) {
        margin-top: 4rem;
    }

    picture {
        height: 350px;
        overflow: hidden;
        box-shadow: rgba(0, 0, 0, 0.15) 0px 5px 15px 0px;
    }

    li:hover a::after {
        transform: scaleX(1);
    }

    li:hover .icon,
    li:hover .icon-2 {
        transform: translateY(-55%) translateX(50%);
    }

    @media (width < 650px) {
        ul {
            gap: 1rem;
            place-content: center;
            padding: 0;
        }
    }

    @media (width < 850px) {
        ul {
            place-content: center;
            padding: 0;
        }
    }
</style>
